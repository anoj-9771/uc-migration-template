name: $(Build.BuildId).$(date:yyyyMMdd)

parameters:
  - name: data_factory_name
    type: string
    default: sl-df-nonprod

pr:
  branches:
    include:
    - master
  paths:
    include:
    - ${{ parameters.data_factory_name }}/*

trigger:
  branches:
    include:
    - master
  paths:
    include:
    - ${{ parameters.data_factory_name }}/*

pool:
  vmImage: ubuntu-latest

stages:
# ---------------------------------------------------------------------------
# Build artifacts
- stage: 'build'
  jobs:
  # Use this section to pull in or out build jobs
  - template: Templates/job-copy-datafactory-arm.yml
# ---------------------------------------------------------------------------
# # Release to Production
# - template: Templates/stage-databricks-integration.yml
#   parameters:
#     stage_name: 'prod'
#     variable_template_name: prd-variables
#     run_condition: and(succeeded(), eq(variables['Build.SourceBranch'], 'refs/heads/sl-devops'))
#     # run_condition: and(succeeded(), eq(variables['Build.SourceBranch'], 'refs/heads/master'))


